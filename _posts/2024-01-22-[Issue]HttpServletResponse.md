---
layout: single
title:  "[Issue] HttpServletResponse"
typora-root-url: ../
---



# βοΈ HttpServletResponse ?

`HttpServletResponse`λ” μ„λΈ”λ¦Ώ μ»¨ν…μ΄λ„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„°μ HTTP μ”μ²­μ— λ€ν• μ‘λ‹µμ„ μƒμ„±ν•λ” λ° μ‚¬μ©λλ” κ°μ²΄μ΄λ‹¤. ν΄λΌμ΄μ–ΈνΈλ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄κ±°λ‚, μ‘λ‹µ ν—¤λ”λ¥Ό μ„¤μ •ν•κ±°λ‚, λ¦¬λ‹¤μ΄λ ‰μ…μ„ μν–‰ν•λ” λ°μ— ν™μ©λλ‹¤. 



#### **μ•μ•„μ•Ό ν•  μ£Όμ” κ°λ…** 

- **μ‘λ‹µ μƒμ„± λ° μ „μ†΅ :**  `HttpServletResponse`λ” ν΄λΌμ΄μ–ΈνΈλ΅ μ‘λ‹µμ„ μƒμ„±ν•κ³  μ „μ†΅ν•λ” λ° μ‚¬μ©λλ”λ° `getWriter()`λ‚ `getOutputStream()` λ©”μ„λ“λ¥Ό ν†µν•΄ μ‘λ‹µ λ°”λ””λ¥Ό μ‘μ„±ν•  μ μλ‹¤. 

  ==> μ‘λ‹µ λ°”λ””λ¥Ό μ‘μ„±ν•λ‹¤λ” κ²ƒμ€ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅λ  μ›Ή νμ΄μ§€μ μ‹¤μ  λ‚΄μ©μ΄λ‚ λ°μ΄ν„°λ¥Ό μƒμ„±ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤. HTTP μ‘λ‹µμ€ ν—¤λ”μ™€ λ°”λ””λ΅ μ΄λ£¨μ–΄μ Έ μμΌλ©°, ν—¤λ”λ” μ‘λ‹µμ— λ€ν• λ©”νƒ€ μ •λ³΄λ¥Ό, λ°”λ””λ” μ‹¤μ  λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ‹¤. 

  ```
  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
      // μ‘λ‹µ ν—¤λ” μ„¤μ •
      response.setContentType("text/plain");
  
      // μ‘λ‹µ λ°”λ”” μ‘μ„±
      PrintWriter writer = response.getWriter();
      writer.println("Hello, World!");
  }
  ```

β€‹	==> ν΄λΌμ΄μ–ΈνΈκ°€ μ΄ μ„λΈ”λ¦Ώμ— HTTP GET μ”μ²­μ„ ν•λ©΄, μ„λ²„λ” "Hello, World!"λ¥Ό μ‘λ‹µμΌλ΅ μ „μ†΅ν•κ² λλ‹¤.



- **μ‘λ‹µ ν—¤λ” μ„¤μ • **: ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅λλ” μ‘λ‹µμ—λ” ν—¤λ” μ •λ³΄κ°€ ν¬ν•¨λλ”λ°  `setHeader()` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ‘λ‹µ ν—¤λ”λ¥Ό μ„¤μ •ν•  μ μλ‹¤.

  ```
  response.setHeader("Content-Type", "text/html");
  ```



- **μƒνƒ μ½”λ“ μ„¤μ •** : μ‘λ‹µμ μƒνƒ μ½”λ“λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ”μ²­μ μ„±κ³µ λλ” μ‹¤ν¨λ¥Ό λ‚νƒ€λ‚Έλ‹¤. `setStatus()` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ μƒνƒ μ½”λ“λ¥Ό μ„¤μ •ν•  μ μλ‹¤.

  ```
  response.setStatus(HttpServletResponse.SC_OK); // 200 OK
  ```

  

- **λ¦¬λ‹¤μ΄λ ‰μ…** : ν΄λΌμ΄μ–ΈνΈλ¥Ό λ‹¤λ¥Έ URLλ΅ λ¦¬λ‹¤μ΄λ ‰νΈν•λ” κ²½μ°μ—λ„ `HttpServletResponse`κ°€ μ‚¬μ©λλ‹¤.

  ```
  response.sendRedirect("/new-page");
  ```



- **μΏ ν‚¤ μ¶”κ°€ **: `HttpServletResponse`λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ—κ² μΏ ν‚¤λ¥Ό μ¶”κ°€ν•  μ μλ‹¤.



- **μΊμ‹± μ μ–΄** : `Cache-Control` ν—¤λ” λ“±μ„ μ„¤μ •ν•μ—¬ ν΄λΌμ΄μ–ΈνΈ λ° ν”„λ΅μ‹ μ„λ²„μ—μ„ μ‘λ‹µ μΊμ‹±μ„ μ μ–΄ν•  μ μλ‹¤.







## π’­ **ISSUE**

μ•„λ μ΄μλ•λ¬Έμ— HttpServletResponseμ— λ€ν•΄ μ •ν™•ν μ§κ³  λ„μ–΄κ°€λ ¤κ³  μ΄ κΈ€μ„ μ‘μ„±ν–λ‹¤. 

```
public class MemberService implements UserDetailsService {
    private final MemberRepository memberRepository;
    private final JwtTokenService jwtTokenService; 
    private final HttpServletResponse response;
}
```

ν•΄λ‹Ή λ΅μ§μ€ λ‚΄κ°€ μ‹¤λ¬΄ν•λ©΄μ„ MemberService λ‚΄μ—μ„ λ΅κ·ΈμΈ μ²λ¦¬ν•λ©΄μ„ μ‘μ„±ν• κ²ƒμ΄λ‹¤.
λ΅κ·ΈμΈμ— μ„±κ³µν•λ©΄ jwtν† ν°μ„ λ°κΈ‰ν•κ³  μΏ ν‚¤μ— μ €μ¥ν•λ” λ°©μ‹μΌλ΅ λ΅μ§μ„ μ‘μ„±ν–λ”λ°
λ¬Έμ λ” `HttpServletResponse`λ¥Ό μ „μ—­λ³€μμ— μ„ μ–Έν•λ” μ§“(?)μ„ ν•΄λ²„λ ¤μ„ μμ •μ„ ν•κ² λλ‹¤.

**`HttpServletResponse`** **λ¥Ό μ™ μ „μ—­λ³€μμ— μ„ μ–Έν•λ©΄ μ•λ κΉ?**
μ΄λ¥Ό μ΄ν•΄ν•λ ¤λ©΄ μ•„λ κ°μ²΄μ§€ν–¥ ν”„λ΅κ·Έλλ°μ κΈ°λ³Έ μ›μΉ™ μ¤‘ ν•λ‚μΈ "μμ΅΄μ„± μ£Όμ…"μ— κ΄€ν• λ‚΄μ©μ„ λ¨Όμ € μ΄ν•΄ν•΄μ•Ό ν•λ‹¤.

 μμ΅΄μ„± μ£Όμ…μ€ ν΄λμ¤κ°€ μ§μ ‘ ν•„μ”λ΅ ν•λ” μμ΅΄μ„±(λ‹¤λ¥Έ ν΄λμ¤λ‚ κ°μ²΄μ— λ€ν• μμ΅΄)μ„ μ™Έλ¶€μ—μ„ μ£Όμ…λ°›λ„λ΅ ν•λ” λ””μμΈ ν¨ν„΄ μ¤‘ ν•λ‚μ΄λ‹¤. μ΄ ν¨ν„΄μ„ ν†µν•΄ ν΄λμ¤ κ°„μ κ²°ν•©λ„λ¥Ό λ‚®μ¶”κ³  μ μ—°ν• μ½”λ“λ¥Ό μ‘μ„±ν•  μ μλ”λ°, `HttpServletResponse`λ¥Ό μ „μ—­λ³€μλ΅ μ„ μ–Έν•λ” κ²ƒμ€ ν•΄λ‹Ή ν΄λμ¤κ°€ λ‚΄λ¶€μ μΌλ΅ μμ‹ μ΄ ν•„μ”λ΅ ν•λ” μμ΅΄μ„±μ„ μ§μ ‘ μƒμ„±ν•κ³  μ μ§€ν•λ” κ²ƒμ΄λ©°, μ΄λ” μμ΅΄μ„± μ£Όμ… μ›μΉ™μ„ μ„λ°°ν•λ” κ²ƒμ΄λ‹¤. 
λ€μ‹ , ν•΄λ‹Ή ν΄λμ¤κ°€ `HttpServletResponse`λ¥Ό ν•„μ”λ΅ ν•λ” λ©”μ„λ“λ‚ μƒμ„±μλ¥Ό ν†µν•΄ μ™Έλ¶€μ—μ„ μ£Όμ…λ°›λ„λ΅ ν•λ” κ²ƒμ΄ κ¶μ¥λλ‹¤. μ„ λ΅μ§μ—μ„μ²λΌ μ „μ—­λ³€μλ΅ μ„ μ–Έν•μ—¬ μ „μ—­ μƒνƒλ¥Ό κ°€μ§€λ” κ²ƒμ€ λ‹¤μ¤‘ μ¤λ λ“ ν™κ²½μ—μ„ μκΈ°μΉ λ»ν• λ™μ‘μ„ μ΄λν•  μ μκΈ° λ•λ¬Έμ— νΉν μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό κ°™μ΄ λ‹¤μμ λ™μ‹ μ”μ²­μ„ μ²λ¦¬ν•λ” ν™κ²½μ—μ„λ” μ‹ μ¤‘ν•΄μ Έμ•Ό ν•λ‹¤. μ΄λ¬ν• μ΄μ λ΅ μμ΅΄μ„± μ£Όμ…μ„ ν†µν•΄ ν•„μ”ν• μμ΅΄μ„±μ„ λ…μ‹μ μΌλ΅ μ£Όμ…λ°›λ„λ΅ ν•λ” κ²ƒμ΄ λ°”λμ§ ν•¨.

**`λν•, ` **HttpServletResponseλ¥Ό μ „μ—­ λ³€μλ΅ μ„ μ–Έν•κ² λλ©΄ ν•΄λ‹Ή κ°μ²΄μ μƒνƒλ¥Ό μ—¬λ¬ λ©”μ„λ“μ—μ„ κ³µμ ν•κ² λκ³ , μ΄λ” λ‹¤μ¤‘ μ¤λ λ“ ν™κ²½μ—μ„ μκΈ°μΉ λ»ν• λ™μ‘μ„ μ΄λν•  μ μλ‹¤. λ•λ¬Έμ— ν•„μ”ν• λ©”μ„λ“μ— λ§¤κ°λ³€μλ΅ μ „λ‹¬ν•λ” λ°©μ‹μ΄ λ” λ‚μ€ μ„¤κ³„ λ°©μ‹μ΄λ‹¤.



**λ‚κ°™μ€ κ²½μ°λ” responseλ¥Ό μ‚¬μ©ν•λ” λ©”μ„λ“μ νλΌλ―Έν„°μ— HttpServletResponseλ¥Ό μ„ μ–Έν•΄μ„ μ‚¬μ©ν•λ„λ΅ μμ •ν–λ‹¤.**